<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Lumina Sync - 太陽と輝く星</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: sans-serif; background-color: #f5f5f5; }
        
        #screen {
            width: 100vw; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: background 3s ease;
            position: relative;
        }

        /* 1. 悩み：グレー／肌色 */
        .state-thinking { background-color: #d3d3d3 !important; }
        .state-deep-thinking { background-color: #f5eadc !important; }

        /* 2. ヒント：太陽のような広がり */
        #sun {
            position: absolute; top: 50%; left: 50%; width: 10px; height: 10px;
            background: #FFD700; border-radius: 50%; box-shadow: 0 0 50px 20px #FFD700;
            transform: translate(-50%, -50%) scale(0); opacity: 0; z-index: 10;
        }
        .sun-animate { animation: sun-expand 1.2s ease-out forwards; }
        @keyframes sun-expand {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(150); opacity: 0; }
        }

        /* 3. 解決：ライトブルーのキラキラ星 */
        .state-solved { background-color: #E0F7FA !important; }
        .star {
            position: absolute; background: white; border-radius: 50%;
            box-shadow: 0 0 10px 2px white; z-index: 5;
            animation: twinkle 1.5s infinite ease-in-out;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        .status-text { color: #444; font-size: 1.8rem; font-weight: bold; z-index: 20; text-align: center; }
        .controls { position: fixed; bottom: 20px; display: flex; gap: 10px; z-index: 30; }
        button { padding: 12px 24px; border-radius: 30px; border: none; cursor: pointer; background: #333; color: white; font-weight: bold; }
    </style>
</head>
<body>

<div id="screen">
    <div id="sun"></div>
    <div id="stars-container"></div>
    <div id="status" class="status-text">集中モード：待機中</div>
    
    <div class="controls">
        <button onclick="changeState('thinking')">1. 悩み</button>
        <button onclick="triggerHint()">2. ヒント(太陽)</button>
        <button onclick="changeState('solved')">3. 解決(星空)</button>
        <button onclick="resetAll()">Reset</button>
    </div>
</div>

<script>
    const screen = document.getElementById('screen');
    const status = document.getElementById('status');
    const sun = document.getElementById('sun');
    const starsContainer = document.getElementById('stars-container');

    function changeState(state) {
        resetVisuals();
        if (state === 'thinking') {
            screen.classList.add('state-thinking');
            status.innerText = "深く考えています（潜伏中）";
            setTimeout(() => {
                if(screen.classList.contains('state-thinking')) {
                    screen.classList.add('state-deep-thinking');
                }
            }, 2000);
        } else if (state === 'solved') {
            screen.classList.add('state-solved');
            status.innerText = "素晴らしい！突破しましたね";
            startStars();
        }
    }

    function triggerHint() {
        sun.classList.remove('sun-animate');
        void sun.offsetWidth; // 強制リセット
        sun.classList.add('sun-animate');
        status.innerText = "先生からのヒントが光りました";
    }

    function startStars() {
        starsContainer.innerHTML = '';
        for (let i = 0; i < 80; i++) { // 星を80個に増やしました
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 5 + 2 + 'px';
            star.style.width = size;
            star.style.height = size;
            star.style.top = Math.random() * 100 + 'vh';
            star.style.left = Math.random() * 100 + 'vw';
            star.style.animationDelay = Math.random() * 2 + 's';
            starsContainer.appendChild(star);
        }
    }

    function resetVisuals() {
        screen.className = '';
        starsContainer.innerHTML = '';
        sun.classList.remove('sun-animate');
    }

    function resetAll() {
        resetVisuals();
        status.innerText = "集中モード：待機中";
    }
</script>
</body>
</html>
